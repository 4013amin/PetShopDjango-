{
  "version": 1,
  "plan": "standard",
  "framework": "django",
  "disk": {
    "name": "data",
    "mount": "/data"
  },
  "build": {
    "use": "python3",
    "commands": [
      "pip install -r requirements.txt",
      "python manage.py collectstatic --noinput",
      "python manage.py migrate"
    ]
  },
  "env": {
    "DJANGO_SECRET_KEY": {
      "generator": "secret"
    },
    "DJANGO_DEBUG": "False",
    "REDIS_HOST": "redis",
    "REDIS_PORT": "6379",
    "REDIS_URL": "redis://redis:6379/0"
  },
  "services": {
    "redis": {
      "image": "redis:alpine",
      "disk": "data"
    }
  },
  "web": {
    "command": "gunicorn ShopApp.wsgi --bind 0.0.0.0:$PORT --workers 3",
    "port": 8000
  },
  "worker": {
    "command": "daphne ShopApp.asgi:application --port $PORT --bind 0.0.0.0",
    "port": 8000
  },
  "mounts": {
    "/static": {
      "path": "staticfiles"
    },
    "/media": {
      "path": "media"
    }
  }
}